<!DOCTYPE html>
<html>
<head>
<title>StenoBuddy</title>
<script src="lookup.js"></script>
<style>
  body {
    font-family: sans-serif;
  }
  #video-container {
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>Please select a KC passage</h1>

<select id="volume-select">
  <option value="1">Volume 1</option>
  <option value="2">Volume 2</option>
</select>

<select id="transcription-select">
  </select>

<select id="speed-select">
  <option value="70">70</option>
  <option value="75">75</option>
  <option value="80">80</option>
  <option value="85">85</option>
  <option value="90">90</option>
  <option value="100">100</option>
</select>

<div id="video-container">
  </div>

<script>

  const volumeSelect = document.getElementById('volume-select');
  const transcriptionSelect = document.getElementById('transcription-select');
  const speedSelect = document.getElementById('speed-select');
  const videoContainer = document.getElementById('video-container');

  const transcriptions = {
    1: Array.from({ length: 22 }, (_, i) => `${i + 1}`),
    2: Array.from({ length: 12 }, (_, i) => `${i + 23}`),//only12 vids in 2nd volume
  };

  function populateTranscriptions(volume) {
    transcriptionSelect.innerHTML = ''; // Clear existing options
    const options = transcriptions[volume];
    options.forEach(transcription => {
      const option = document.createElement('option');
      option.value = transcription;
      option.text = transcription;
      transcriptionSelect.appendChild(option);
    });
  }
  
  function updateVideo() {
  const spd = document.getElementById('speed-select').value;
  const tra = document.getElementById('transcription-select').value;
    /*const volume = volumeSelect.value;
    const transcription = transcriptionSelect.value;
    const speed = speedSelect.value;
*/

    videoUrl = urlLookup[parseInt(tra,10)][parseInt(spd,10)];  // Use embed URL

    videoContainer.innerHTML = `<iframe width="560" height="315" src="${videoUrl}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`;
  }

  volumeSelect.addEventListener('change', () => {
    populateTranscriptions(volumeSelect.value);
    updateVideo();
  });

  transcriptionSelect.addEventListener('change', updateVideo);
  speedSelect.addEventListener('change', updateVideo);

  // Initialize on load
  populateTranscriptions(volumeSelect.value);
  updateVideo();


</script>

</body>
</html>
